---
title: "Adding a Custom Model"
author: "Jonathan Law"
date: "22 August 2016"
output: html_document
---

In order to add a new model, we must specify six functions:

```scala
trait Model {
  def observation: Eta => Rand[Observation]
  def link(x: Gamma): Eta = Vector(x)
  def f(s: State, t: Time): Gamma
  def x0: Rand[State]
  def stepFunction: (State, TimeIncrement) => Rand[State]
  def dataLikelihood: (Eta, Observation) => LogLikelihood
}
```

1. An `observation` model, a monadic distribution `Rand` with a `draw` method
2. A non-linear linking function if the parameter space is different to the domain of the state space
3. A linear function `f` to transform the state in a deterministic way
4. A definition of the initial State, `x0`
5. A `stepFunction` to advance the state
6. A `likelihood`, to calculate the likelihood of an observation given a value of the transformed state `Eta`